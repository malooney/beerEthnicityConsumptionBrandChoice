---
title: "Lab Notebook for: \n beerEthnicityConsumptionBrandChoice"
author: "Matthew Aaron Looney"
date: "7/31/2018"
output: 
  pdf_document: 
    fig_caption: yes
    toc: yes
    toc_depth: 4
header-includes:
- \usepackage{graphicx}
- \usepackage{rotating, float, caption}
- \usepackage{longtable}
- \usepackage{amssymb,amsmath}
- \usepackage{dcolumn}
- \usepackage{setspace}
- \usepackage{mathrsfs}
- \usepackage{eso-pic,graphicx,transparent}
fontsize: 10pt
geometry: margin = 1.25in
---

\newpage
  
```{r echo=F, warning=F, message=F}

library(knitr)
library(kableExtra)
library(beerEthnicityConsumptionBrandChoice)

path.local <- rprojroot::find_rstudio_root_file()

#devtools::document()
#devtools::use_package("data.tree", "Suggests")

```
  
# S1.beer_2010DataCleaning - Process raw beer data

```{r echo=F, cache=T, message=F, warning=F}

hora <- S1.beer_2010DataCleaning(save_2010_main_data = 'all_formats',
                                 out_algoRunTime = T)

```
  
\begin{verbatim}
Algorithm name: S1.beer_2010DataCleaning(save_2010_main_data = 'all_formats',
                                         out_algoRunTime = T)
\end{verbatim}
                            
Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
\newpage

# S2.construct_2010marketData - Partition the cleaned data by city

```{r echo=F, cache=T, message=F, warning=F}

hora <- S2.construct_2010marketData(input_fileType = 'feather',
                                    marketNames = c('all'),
                                    out_algoRunTime = T)

```
  
\begin{verbatim}
Algorithm name: S2.construct_2010marketData(input_fileType = 'feather',
                                            marketNames = c('all'),
                                            out_algoRunTime = T)
\end{verbatim}
                            
Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
\newpage

#S3.explore_2010marketData - Explore the completeness of the data

This algorithm takes city level data and determines, by brand, if there are any weeks over a 52 week period (one year) that a brand is missing in the data. If there are missing weeks in the data it is impossible to tell if there were no sales of a particular brand during that week or if the brand was not offered for sale. All we can see is that the week is missing data. Further, this algorithm determines the completeness of the data at the chain level. The same problem occurs when evaluating missing data at the chain level. It is not possible to say why the data is missing, simply that the data is missing.  

The output of the algorithm presents a data file called: D3.explore_2010marketData.rds

This files contains information on missingness in the data by city / brand / week / chain.

Several data frames are contained in the list. 

  * BrandsOnly_CompleteData_wks: contains a list of brands with complete data over all 52 weeks.
  
  * explore_Data_Complete_wks: contains the raw data.frame for the brands with complete data over all 52 weeks.
  
  * Brands_CompleteData_wksANDChains: contains a list of brands with complete data over all 52 weeks and complete data over all chains in the city. The number of chains is variable depending on the city.
  
  * explore_Data_Complete_wksANDChains: contains the raw data.frame for the brands with complete data over all 52 weeks and chains with complete data over all chains.
  
  * explore_Data: contains the complete raw data.frame used to obtain the above filtered results.

```{r echo=F, cache=T, message=F, warning=F}

hora <- S3.explore_2010marketData(out_algoRunTime = T)

```
  
\begin{verbatim}
Algorithm name: S3.explore_2010marketData(out_algoRunTime = T) 
\end{verbatim}
                            
Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
\newpage

# S4.allBrands_2010analysis - 

```{r echo=F, cache=T, message=F, warning=F}

hora <- S4.allBrands_2010analysis( brands= c("CHICAGO", 
                                             "DALLAS, TX", 
                                             "LOS ANGELES", 
                                             "SPOKANE", 
                                             "SYRACUSE", 
                                             "HOUSTON"), 
                                    out_algoRunTime = T
                                  )

```
  
\begin{verbatim}
Algorithm name: S4.allBrands_2010analysis(brands= c("CHICAGO", 
                                                    "DALLAS, TX", 
                                                    "LOS ANGELES", 
                                                    "SPOKANE", 
                                                    "SYRACUSE", 
                                                    "HOUSTON"), 
                                          out_algoRunTime = T
                                          )  
\end{verbatim}
                            
Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
\newpage

# S5.aggregate_allBrands_2010 - 

\newpage

## City Data:

\newpage

### CHICAGO
  
```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'CHICAGO', 
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T, 
                                    out_algoRunTime = T)

Market <- "CHICAGO"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))

```
  
\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'CHICAGO', 
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T, 
                                            out_algoRunTime = T)  
\end{verbatim}
                            
Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
  
prcntBrandRep_units: `r dta[[1]][1] `%.

prcntBrandRep_dol: `r dta[[1]][2] `%.

prcntBrandRep_gal: `r dta[[1]][3] `%.

prcntFirmRep_units: `r dta[[2]][1] `%.

prcntFirmRep_dol: `r dta[[2]][2] `%.

prcntFirmRep_gal: `r dta[[2]][3] `%.

prcntConglomerateRep_units: `r dta[[3]][1] `%.

prcntConglomerateRep_dol: `r dta[[3]][2] `%.

prcntConglomerateRep_gal: `r dta[[3]][3] `%.
  
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for CHICAGO", 
   booktabs = T, 
   longtable=T, 
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))


```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for CHICAGO", 
             booktabs = T, 
             longtable=T,  
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for CHICAGO", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```

\newpage

### DALLAS, TX

```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'DALLAS, TX',
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T,
                                    out_algoRunTime = T)

Market <- "DALLAS, TX"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))

```

\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'DALLAS, TX',
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T,
                                            out_algoRunTime = T)
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).  
  
prcntBrandRep_units: `r dta[[1]][1] `%.

prcntBrandRep_dol: `r dta[[1]][2] `%.

prcntBrandRep_gal: `r dta[[1]][3] `%.

prcntFirmRep_units: `r dta[[2]][1] `%.

prcntFirmRep_dol: `r dta[[2]][2] `%.

prcntFirmRep_gal: `r dta[[2]][3] `%.

prcntConglomerateRep_units: `r dta[[3]][1] `%.

prcntConglomerateRep_dol: `r dta[[3]][2] `%.

prcntConglomerateRep_gal: `r dta[[3]][3] `%.
  
```{r echo=F, cache=T, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for DALLAS, TX", 
   booktabs = T,
   longtable=T,
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for DALLAS, TX", 
             booktabs = T, 
             longtable=T,
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for DALLAS, TX", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```

\newpage

### LOS ANGELES

```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'LOS ANGELES',
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T,
                                    out_algoRunTime = T)

Market <- "LOS ANGELES"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))

```

\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'LOS ANGELES',
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T,
                                            out_algoRunTime = T)
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).
  
  
prcntBrandRep_units: `r dta[[1]][1] `%.

prcntBrandRep_dol: `r dta[[1]][2] `%.

prcntBrandRep_gal: `r dta[[1]][3] `%.

prcntFirmRep_units: `r dta[[2]][1] `%.

prcntFirmRep_dol: `r dta[[2]][2] `%.

prcntFirmRep_gal: `r dta[[2]][3] `%.

prcntConglomerateRep_units: `r dta[[3]][1] `%.

prcntConglomerateRep_dol: `r dta[[3]][2] `%.

prcntConglomerateRep_gal: `r dta[[3]][3] `%.
  
```{r echo=F, cache=T, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for LOS ANGELES", 
   booktabs = T, 
   longtable=T,
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for LOS ANGELES", 
             booktabs = T, 
             longtable=T,
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for LOS ANGELES", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
\newpage

### SPOKANE
  
```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'SPOKANE',
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T,
                                    out_algoRunTime = T)

Market <- "SPOKANE"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))

```

\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'SPOKANE',
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T,
                                            out_algoRunTime = T)
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).
  
  
prcntBrandRep_units: `r dta[[1]][1] `%.

prcntBrandRep_dol: `r dta[[1]][2] `%.

prcntBrandRep_gal: `r dta[[1]][3] `%.

prcntFirmRep_units: `r dta[[2]][1] `%.

prcntFirmRep_dol: `r dta[[2]][2] `%.

prcntFirmRep_gal: `r dta[[2]][3] `%.

prcntConglomerateRep_units: `r dta[[3]][1] `%.

prcntConglomerateRep_dol: `r dta[[3]][2] `%.

prcntConglomerateRep_gal: `r dta[[3]][3] `%.
  
```{r echo=F, cache=T, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for SPOKANE", 
   booktabs = T, 
   longtable=T,
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for SPOKANE", 
             booktabs = T,
             longtable=T,
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for SPOKANE", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```

\newpage

### SYRACUSE

```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'SYRACUSE',
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T,
                                    out_algoRunTime = T)

Market <- "SYRACUSE"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))
```

\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'SYRACUSE',
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T,
                                            out_algoRunTime = T)
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).
  
  
prcntBrandRep_units: `r dta[[1]][1] `%.

prcntBrandRep_dol: `r dta[[1]][2] `%.

prcntBrandRep_gal: `r dta[[1]][3] `%.

prcntFirmRep_units: `r dta[[2]][1] `%.

prcntFirmRep_dol: `r dta[[2]][2] `%.

prcntFirmRep_gal: `r dta[[2]][3] `%.

prcntConglomerateRep_units: `r dta[[3]][1] `%.

prcntConglomerateRep_dol: `r dta[[3]][2] `%.

prcntConglomerateRep_gal: `r dta[[3]][3] `%.
  
```{r echo=F, cache=T, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for SYRACUSE", 
   booktabs = T, 
   longtable=T,
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for SYRACUSE", 
             booktabs = T,
             longtable=T,
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for SYRACUSE", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```

\newpage

### HOUSTON

```{r echo=F, cache=T, message=F, warning=F, fig.height=8, fig.width=9}

par(mfrow= c(1, 2), ps= 8, cex= 0.75, cex.main= 1.25)

hora <- S5.aggregate_allBrands_2010(Market = 'HOUSTON',
                                    figurePlot = T,
                                    screenPlot = F,
                                    saveData = T,
                                    out_algoRunTime = T)

Market <- "HOUSTON"

dta <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D5.aggregate_allBrands_2010_", gsub('[ ,]', '', Market), ".rds", sep = ""))

```

\begin{verbatim}
Algorithm name: S5.aggregate_allBrands_2010(Market = 'HOUSTON',
                                            figurePlot = T,
                                            screenPlot = F,
                                            saveData = T,
                                            out_algoRunTime = T)
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).   
  
prcntBrandRep_units: `r dta[[1]][1] `%.  
  
prcntBrandRep_dol: `r dta[[1]][2] `%.  
  
prcntBrandRep_gal: `r dta[[1]][3] `%.  
  
prcntFirmRep_units: `r dta[[2]][1] `%.  
  
prcntFirmRep_dol: `r dta[[2]][2] `%.  
  
prcntFirmRep_gal: `r dta[[2]][3] `%.  
  
prcntConglomerateRep_units: `r dta[[3]][1] `%.  
  
prcntConglomerateRep_dol: `r dta[[3]][2] `%.  
  
prcntConglomerateRep_gal: `r dta[[3]][3] `%.  
  
```{r echo=F, cache=T, message=F, warning=F, results='asis'}

 knitr::kable(
   dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]], 
   caption="Aggregate Conglomerate Data for HOUSTON", 
   booktabs = T, 
   longtable=T,
   linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"), 
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]], 
             caption="Aggregate Firm Data for HOUSTON", 
             booktabs = T,
             longtable=T,
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```
  
```{r echo=F, cache=F, message=F, warning=F, results='asis'}

knitr::kable(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]], 
             caption="Aggregate Brand Data for HOUSTON", 
             booktabs = T, 
             longtable=T, 
             linesep = "") %>%
kableExtra::kable_styling(latex_options = c("striped", "hold_position"),
                          full_width = NULL) %>%
kableExtra::footnote(general=c(
  paste("Number of Conglomerates: ", nrow(dta[["aggregateConglomerates"]][["aggregateDataSummaryConglomerates"]]), sep=""), 
  paste("Number of firms: ", nrow(dta[["aggregateFirms"]][["aggregateDataSummaryFirms"]]), sep=""), 
  paste("Number of Brands: ", nrow(dta[["aggregateBrands"]][["aggregateDataSummaryBrands"]]), sep="")))

```

\newpage
  
## Plots:
  
\newpage  

### CHICAGO

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_CHICAGO.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for CHICAGO}
\end{minipage}
\end{sideways}
\end{center}

\newpage  
  
### DALLAS, TX

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_DALLASTX.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for DALLAS, TX}
\end{minipage}
\end{sideways}
\end{center}

\newpage

### LOS ANGELES

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_LOSANGELES.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for LOS ANGELES}
\end{minipage}
\end{sideways}
\end{center}

\newpage
  
### SPOKANE

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_SPOKANE.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for SPOKANE}
\end{minipage}
\end{sideways}
\end{center}

\newpage
  
### SYRACUSE

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_SYRACUSE.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for SYRACUSE}
\end{minipage}
\end{sideways}
\end{center}

\newpage
  
### HOUSTON

\mbox{}
\begin{center}
\begin{sideways}
\begin{minipage}{1.25\linewidth}
\includegraphics{`r paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/plots/plot.aggregateData_HOUSTON.pdf", sep="") `}
\captionof{figure}{Plot of Aggregate Data for HOUSTON}
\end{minipage}
\end{sideways}
\end{center}

\newpage

# S6.hierarchyTree - Data Trees

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = NULL,
                         saveMarketHierarchy = F,
                         saveAllBrandHierarchy = T,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = NULL,
                                 saveMarketHierarchy = F,
                                 saveAllBrandHierarchy = T,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).


## City Data: 

### CHICAGO

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'CHICAGO',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'CHICAGO',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_CHICAGO.rds')

```

### DALLAS, TX

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'DALLAS, TX',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'DALLAS, TX',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_DALLASTX.rds')

```

### LOS ANGELES

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'LOS ANGELES',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'LOS ANGELES',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_LOSANGELES.rds')

```

### SPOKANE

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'SPOKANE',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'SPOKANE',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_SPOKANE.rds')

```

### SYRACUSE

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'SYRACUSE',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'SYRACUSE',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_SYRACUSE.rds')

```

### HOUSTON

```{r echo=F, cache=T, message=F, warning=F}

hora <- S6.hierarchyTree(Market = 'HOUSTON',
                         saveMarketHierarchy = T,
                         saveAllBrandHierarchy = F,
                         out_algoRunTime = T )

```

\begin{verbatim}
Algorithm name: S6.hierarchyTree(Market = 'HOUSTON',
                                 saveMarketHierarchy = T,
                                 saveAllBrandHierarchy = F,
                                 out_algoRunTime = T )
\end{verbatim}

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=T, message=F, warning=F}

S7.printHierarchyTree(fileName='D6.treeStudy_2010_HOUSTON.rds')

```

\newpage

```{r echo=F, cache=T, message=F, warning=F}


hora <- S8.generate_aggregate_data_frame(nWeeks = 52,
                                         nmkt = 52,
                                         city="CHICAGO",
                                         saveAggregate_data_frame = T, 
                                         out_algoRunTime = T)

```

Algorithm run time: `r difftime(hora[[2]], hora[[1]], units="min") ` minute(s).

```{r echo=F, cache=F, message=F, warning=F}


# Load Data -------------------------------------------------------------------

  path.local <- try(rprojroot::find_rstudio_root_file(), silent=TRUE)

  if(class(path.local) == 'try-error'){
    path.local <- getwd()
  } else{}

  if(!file.exists(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.CHICAGO.rds", sep=""))) {

    stop("file does not exist in project directory.")

  } else{

  D8.2010_aggregate_data.CHICAGO  <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.CHICAGO.rds", sep=""))

  }

  lm.Brands <- paste(colnames(D8.2010_aggregate_data.CHICAGO[31:80]), collapse=" + ")

  model.lm.Brands <- formula(paste("log(share) - log(outshr)~  0 + p2_Wmean +",
                         lm.Brands, sep=""))

  summary(lm.results <- lm( model.lm.Brands,
                          data= D8.2010_aggregate_data.CHICAGO))


  summary(lm.results1 <- lm(log(share) - log(outshr) ~ 0 + p2_Wmean + 
                              ABV + 
                              prct_PR + 
                              Calories_oz + 
                              Carbs_oz + 
                              USA + 
                              Mexico, 
                             data= D8.2010_aggregate_data.CHICAGO))

```

\newpage

```{r echo=F, cache=T, message=F, warning=F}


hora <- S8.generate_aggregate_data_frame(nWeeks = 52,
                                         nmkt = 52,
                                         city="DALLAS, TX",
                                         saveAggregate_data_frame = T, 
                                         out_algoRunTime = T)

```

```{r echo=F, cache=T, message=F, warning=F}

# Load Data -------------------------------------------------------------------

  path.local <- try(rprojroot::find_rstudio_root_file(), silent=TRUE)

  if(class(path.local) == 'try-error'){
    path.local <- getwd()
  } else{}

  if(!file.exists(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.DALLASTX.rds", sep=""))) {

    stop("file does not exist in project directory.")

  } else{

  D8.2010_aggregate_data.DALLASTX  <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.DALLASTX.rds", sep=""))

  }

  lm.Brands <- paste(colnames(D8.2010_aggregate_data.DALLASTX[31:80]), collapse=" + ")

  model.lm.Brands <- formula(paste("log(share) - log(outshr)~  0 + p2_Wmean +",
                         lm.Brands, sep=""))

  summary(lm.results <- lm( model.lm.Brands,
                          data= D8.2010_aggregate_data.DALLASTX))


  summary(lm.results1 <- lm(log(share) - log(outshr) ~ 0 + p2_Wmean + 
                              ABV + 
                              prct_PR + 
                              Calories_oz + 
                              Carbs_oz + 
                              USA + 
                              Mexico, 
                            data= D8.2010_aggregate_data.DALLASTX))
```

\newpage

```{r echo=F, cache=T, message=F, warning=F}


hora <- S8.generate_aggregate_data_frame(nWeeks = 52,
                                         nmkt = 52,
                                         city="LOS ANGELES",
                                         saveAggregate_data_frame = T, 
                                         out_algoRunTime = T)

```

```{r echo=F, cache=T, message=F, warning=F}

# Load Data -------------------------------------------------------------------

  path.local <- try(rprojroot::find_rstudio_root_file(), silent=TRUE)

  if(class(path.local) == 'try-error'){
    path.local <- getwd()
  } else{}

  if(!file.exists(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.LOSANGELES.rds", sep=""))) {

    stop("file does not exist in project directory.")

  } else{

  D8.2010_aggregate_data.LOSANGELES  <- readRDS(paste(path.local, "/data_beerEthnicityConsumptionBrandChoice/D8.2010_aggregate_data.LOSANGELES.rds", sep=""))

  }

  lm.Brands <- paste(colnames(D8.2010_aggregate_data.LOSANGELES[31:80]), collapse=" + ")

  model.lm.Brands <- formula(paste("log(share) - log(outshr)~  0 + p2_Wmean +",
                         lm.Brands, sep=""))

  summary(lm.results <- lm( model.lm.Brands,
                          data= D8.2010_aggregate_data.LOSANGELES))


  summary(lm.results1 <- lm(log(share) - log(outshr) ~ 0 + p2_Wmean + 
                              ABV + 
                              prct_PR +
                              Calories_oz + 
                              Carbs_oz + 
                              USA + 
                              Mexico, 
                            data= D8.2010_aggregate_data.LOSANGELES))
```
